!function(a,b){"function"==typeof define&&define.amd?define(b):a.VMasker=b()}(this,function(){var a="9",b="A",c=[9,16,17,18,36,37,38,39,40,91,92,93],d=function(a){for(var b=0,d=c.length;d>b;b++)if(a==c[b])return!1;return!0},e=function(a){return a=a||{},a={precision:a.hasOwnProperty("precision")?a.precision:2,separator:a.separator||",",delimiter:a.delimiter||".",unit:a.unit&&a.unit.replace(/[\s]/g,"")+" "||"",suffixUnit:a.suffixUnit&&" "+a.suffixUnit.replace(/[\s]/g,"")||"",zeroCents:a.zeroCents,lastOutput:a.lastOutput},a.moneyPrecision=a.zeroCents?0:a.precision,a},f=function(a){this.elements=a};f.prototype.bindElementToMask=function(a){for(var b=this,c=function(c){var e=c.target||c.srcElement;d(c.keyCode)&&setTimeout(function(){b.opts.lastOutput=e.lastOutput,e.value=g[a](e.value,b.opts),e.lastOutput=e.value,e.setSelectionRange&&b.opts.suffixUnit&&e.setSelectionRange(e.value.length,e.value.length-b.opts.suffixUnit.length)},0)},e=0,f=this.elements.length;f>e;e++)this.elements[e].lastOutput="",this.elements[e].addEventListener?(this.elements[e].addEventListener("keyup",c),this.elements[e].addEventListener("keydown",c)):(this.elements[e].attachEvent("onkeyup",c),this.elements[e].attachEvent("onkeydown",c)),this.elements[e].value.length&&(this.elements[e].value=g[a](this.elements[e].value,this.opts))},f.prototype.maskMoney=function(a){this.opts=e(a),this.bindElementToMask("toMoney")},f.prototype.maskNumber=function(){this.opts={},this.bindElementToMask("toNumber")},f.prototype.maskPattern=function(a){this.opts={pattern:a},this.bindElementToMask("toPattern")};var g=function(a){if(!a)throw new Error("VanillaMasker: There is no element to bind.");var b="length"in a?a.length?a:[]:[a];return new f(b)};return g.toMoney=function(a,b){if(b=e(b),b.zeroCents){b.lastOutput=b.lastOutput||"";var c="("+b.separator+"[0]{0,"+b.precision+"})",d=new RegExp(c,"g"),f=a.toString().replace(/[\D]/g,"").length||0,g=b.lastOutput.toString().replace(/[\D]/g,"").length||0;a=a.toString().replace(d,""),g>f&&(a=a.slice(0,a.length-1))}var h=a.toString().replace(/[\D]/g,""),i=new RegExp("^(0|\\"+b.delimiter+")"),j=new RegExp("(\\"+b.separator+")$"),k=h.substr(0,h.length-b.moneyPrecision),l=k.substr(0,k.length%3),m=new Array(b.precision+1).join("0");k=k.substr(k.length%3,k.length);for(var n=0,o=k.length;o>n;n++)n%3===0&&(l+=b.delimiter),l+=k[n];if(l=l.replace(i,""),l=l.length?l:"0",!b.zeroCents){var p=h.length-b.precision,q=h.substr(p,b.precision),r=q.length,s=b.precision>r?b.precision:r;m=(m+q).slice(-s)}var t=b.unit+l+b.separator+m+b.suffixUnit;return t.replace(j,"")},g.toPattern=function(c,d){var e,f=("object"==typeof d?d.pattern:d).split(""),g=c.toString().replace(/[^0-9a-zA-Z]/g,""),h=0;for(e=0;e<f.length&&!(h>=g.length);e++)f[e]===a&&g[h].match(/[0-9]/)||f[e]===b&&g[h].match(/[a-zA-Z]/)?f[e]=g[h++]:(f[e]===a||f[e]===b)&&(f=f.slice(0,e));return f.join("").substr(0,e)},g.toNumber=function(a){return a.toString().replace(/(?!^-)[^0-9]/g,"")},g});